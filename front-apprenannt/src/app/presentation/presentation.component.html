<div>
  <div *ngIf="step === 'LOADING'" class="d-flex custom-flex-container w-100" style="height: 100vh">
    <div class="d-flex justify-content-center align-self-center mx-auto">
      <div class="text-center">
        <img src="../../../assets/loading.gif" alt="Image de chargement" width="150" height="150">
        <br>
        Chargement en cours...
      </div>
    </div>
  </div>

  <div *ngIf="step === 'WAITING_FOR_SESSION_START'" class="d-flex custom-flex-container w-100" style="height: 100vh">
    <div class="d-flex justify-content-center align-self-center mx-auto">
      <div class="text-center">
        <img src="../../../assets/loading.gif" alt="Image de chargement" width="150" height="150">
        <br>
        Attente du début de la session...
      </div>
    </div>
  </div>

  <div *ngIf="step === 'ASK_INFO_PARTICIPANT'" class="d-flex custom-flex-container w-100">
    <div class="justify-content-center align-self-center mx-auto">
      <form [formGroup]="formCollectParticipant" (submit)="onSubmitCollectParticipant()">
        <div class="form-row">
          <div class="form-group col-md-12">
            <label for="nom">Nom</label>
            <input type="text" class="form-control" formControlName="nom" id="nom">
          </div>
        </div>

        <div class="form-row">
          <div class="form-group col-md-12">
            <label for="prenom">Prénom</label>
            <input type="text" class="form-control" formControlName="prenom" id="prenom">
          </div>
        </div>
        <button type="submit" class="btn btn-primary btn-block">Participer à la session</button>
      </form>
    </div>
  </div>

  <div *ngIf="step === 'ASK_USERNAME'" class="d-flex custom-flex-container w-100" style="height: 100vh">
    <div class="d-flex justify-content-center align-self-center mx-auto">
      <form [formGroup]="formCollectUsername" (submit)="onSubmitCollectUsername()">
        <div class="form-row">
          <div class="form-group col-md-12">
            <label for="username">Saisissez un pseudo</label>
            <input type="text" class="form-control" formControlName="username" id="username">
          </div>
        </div>
        <button type="submit" class="btn btn-primary btn-block">Participer à la session</button>
      </form>
    </div>
  </div>

  <div *ngIf="step === 'MEDIA'" class="container-fluid px-0 d-flex flex-column" style="height: calc(100vh - 72px)">
    <div class="my-1 mx-2 mb-4">
      <h3 class="text-center">{{ question.titre }}</h3>
    </div>

    <div *ngIf="question && question.media && question.media.type === 'TEXT'" style="flex-grow: 1">
      <div class="h4 mx-3" style="height: calc(100% - 50px)">{{ question.media.url }}</div>
    </div>
    <div *ngIf="question && question.media && question.media.type === 'IMAGE'" class="mh-100" style="min-height: 350px;flex-grow: 1">
      <div style="height: calc(100% - 50px)">
        <img [src]="question.media.url" class="d-block mx-auto" alt="Impossible de charger l'image..." style="max-height: 100%;min-width: 350px; max-width: 100%">
      </div>
    </div>
    <div *ngIf="question && question.media && question.media.type === 'AUDIO'" class="w-100" style="flex-grow: 1">
      <div class="h4 mx-3" style="height: calc(100% - 50px)">Audio en cours de diffusion par le professeur</div>
    </div>
    <div *ngIf="question && question.media && question.media.type === 'VIDEO'" class="w-100" style="width: 100%; flex-grow: 1">
      <iframe [src]="question.media.url | safeUrl" class="py-0 my-0 ml-2" style="width: calc(100% - 1rem);height: calc(100% - 50px)"></iframe>
    </div>
  </div>

  <div *ngIf="step === 'QUESTION'" class="container-fluid px-0 d-flex flex-column" style="height: calc(100vh - 72px)">
    <div class="d-flex justify-content-center align-items-center flex-column" style="flex-grow: 1">
      <h3 class="w-100 text-center mb-4">{{ question.titre }}</h3>
      <br>
      <div class="h4 w-100 text-center" *ngIf="endTimestamp - currentTimestamp | trunc">
        Temps restant : {{ endTimestamp - currentTimestamp | trunc }} secondes
      </div>
    </div>
  </div>
</div>
